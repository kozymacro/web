<style>
.connect-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    z-index: 9999;
    display: none;
    opacity: 0;
    transition: opacity 0.2s ease;
}

.connect-overlay.show {
    display: flex;
    opacity: 1;
    align-items: center;
    justify-content: center;
}

.connect-modal {
    background: #18181b;
    border: 1px solid #2c2c30;
    border-radius: 8px;
    max-width: 480px;
    width: 90%;
    position: relative;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
}

.connect-close {
    position: absolute;
    top: 12px;
    right: 16px;
    background: none;
    border: none;
    color: #71717a;
    font-size: 20px;
    cursor: pointer;
    transition: color 0.2s ease;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connect-close:hover {
    color: #a1a1aa;
}

.connect-content {
    padding: 2rem;
    text-align: center;
}

.connect-logo {
    width: 64px;
    height: 64px;
    margin: 0 auto 1.5rem;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connect-logo img {
    width: 40px;
    height: 40px;
}

.connect-title {
    font-size: 1.5rem;
    font-weight: 600;
    color: #e4e4e7;
    margin-bottom: 0.75rem;
}

.connect-subtitle {
    font-size: 0.95rem;
    color: #a1a1aa;
    margin-bottom: 1.5rem;
    line-height: 1.4;
}

.connect-features {
    text-align: left;
    margin-bottom: 1.5rem;
    space-y: 0.75rem;
}

.connect-feature {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 0.75rem;
    padding: 0.75rem;
    background: rgba(255, 255, 255, 0.02);
    border-radius: 6px;
}

.connect-feature-icon {
    width: 20px;
    height: 20px;
    min-width: 20px;
    color: #a1a1aa;
}

.connect-feature-text {
    color: #a1a1aa;
    font-size: 0.9rem;
    line-height: 1.3;
}


.connect-buttons {
    display: flex;
    gap: 0.75rem;
    justify-content: center;
    flex-wrap: wrap;
}

.connect-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.6rem 1.2rem;
    border-radius: 6px;
    text-decoration: none;
    font-weight: 500;
    font-size: 0.85rem;
    transition: all 0.2s ease;
    border: 1px solid transparent;
}

.connect-btn-primary {
    background: #3582FB;
    color: white;
}

.connect-btn-primary:hover {
    background: #2563eb;
    color: white;
    text-decoration: none;
}

.connect-btn-secondary {
    background: transparent;
    color: #3582FB;
    border-color: rgba(53, 130, 251, 0.5);
}

.connect-btn-secondary:hover {
    background: rgba(53, 130, 251, 0.1);
    color: #3582FB;
    border-color: #3582FB;
    text-decoration: none;
}

.connect-btn-icon {
    width: 14px;
    height: 14px;
    min-width: 14px;
}

.connect-checkbox {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
    justify-content: center;
}

.connect-checkbox input[type="checkbox"] {
    width: 16px;
    height: 16px;
    margin: 0;
    accent-color: #3582FB;
    background-color: transparent;
    border: 1px solid #71717a;
    appearance: none;
    border-radius: 2px;
    position: relative;
    cursor: pointer;
}

.connect-checkbox input[type="checkbox"]:checked {
    background-color: #3582FB;
    border-color: #3582FB;
}

.connect-checkbox input[type="checkbox"]:checked::after {
    content: '✓';
    position: absolute;
    color: white;
    font-size: 12px;
    font-weight: bold;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
}

.connect-checkbox label {
    color: #a1a1aa;
    font-size: 0.8rem;
    margin: 0;
    cursor: pointer;
    user-select: none;
}

@media (max-width: 768px) {
    .connect-modal {
        width: 95%;
        margin: 1rem;
    }
    
    .connect-content {
        padding: 1.5rem;
    }
    
    .connect-title {
        font-size: 1.25rem;
    }
    
    .connect-buttons {
        flex-direction: column;
        align-items: stretch;
    }
    
    .connect-btn {
        justify-content: center;
    }
}

@media (max-width: 576px) {
    .connect-content {
        padding: 1.25rem;
    }
    
    .connect-feature {
        padding: 0.5rem;
    }
}
</style>

<!-- Kozy Connect Modal -->
<div class="connect-overlay" id="connectModal">
    <div class="connect-modal">
        <div class="connect-glow"></div>
        <button class="connect-close" onclick="closeKozyConnectModal()">×</button>
        
        <div class="connect-content">
            <div class="connect-logo">
                <!-- Logo placeholder - replace with actual Kozy Connect logo -->
                <img src="/assets/img/logo-connect.png" alt="Kozy Connect" />
            </div>
            
            <h2 class="connect-title">
                {{ i18n "connectTitle" }}
            </h2>
            
            <p class="connect-subtitle">
                {{ i18n "connectSubtitle" | safeHTML }}
            </p>
            
            <div class="connect-features">
                <div class="connect-feature">
                    <svg class="connect-feature-icon" fill="currentColor" viewBox="0 0 24 24">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M4 4h3l2-2h6l2 2h3a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2m8 3a5 5 0 0 0-5 5a5 5 0 0 0 5 5a5 5 0 0 0 5-5a5 5 0 0 0-5-5m0 2a3 3 0 0 1 3 3a3 3 0 0 1-3 3a3 3 0 0 1-3-3a3 3 0 0 1 3-3"/></svg>
                    </svg>
                    <div class="connect-feature-text">{{ i18n "connectFeature1" }}</div>
                </div>
                
                <div class="connect-feature">
                    <svg class="connect-feature-icon" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M4 1c-1.11 0-2 .89-2 2v4c0 1.11.89 2 2 2H1v2h12V9h-3c1.11 0 2-.89 2-2V3c0-1.11-.89-2-2-2zm0 2h6v4H4zM3 13v7h7v-2H5v-5zm11 0c-1.11 0-2 .89-2 2v4c0 1.11.89 2 2 2h-3v2h12v-2h-3c1.11 0 2-.89 2-2v-4c0-1.11-.89-2-2-2zm0 2h6v4h-6z"/>
                    </svg>
                    <div class="connect-feature-text">{{ i18n "connectFeature2" }}</div>
                </div>
                
                <div class="connect-feature">
                    <svg class="connect-feature-icon" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                        <path d="M12 4.5L9.5 9.5 4 10.3l4 3.9-.9 5.3 4.9-2.6 4.9 2.6-.9-5.3 4-3.9-5.5-.8L12 4.5z" opacity="0.3"/>
                    </svg>
                    <div class="connect-feature-text">{{ i18n "connectFeature3" }}</div>
                </div>
            </div>
            
            <div class="connect-checkbox">
                <input type="checkbox" id="dontShowAgain" />
                <label for="dontShowAgain">{{ i18n "connectDontShow" }}</label>
            </div>
            
            <div class="connect-buttons">
                <a href='{{ if eq .Site.Language.Lang "tr" }}{{ else }}/en{{ end }}/videos/#general-connect' class="connect-btn connect-btn-secondary">
                    <svg class="connect-btn-icon" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M8 5v14l11-7z"/>
                    </svg>
                    {{ i18n "connectWatchVideo" }}
                </a>
                
                <a href="https://connect.kozymacro.com" class="connect-btn connect-btn-primary">
                    <svg class="connect-btn-icon" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/>
                    </svg>
                    {{ i18n "connectStartNow" }}
                </a>
            </div>
        </div>
    </div>
</div>

<script>
function showKozyConnectModal() {
    const modal = document.getElementById('connectModal');
    modal.classList.add('show');
    document.body.style.overflow = 'hidden';
}

function closeKozyConnectModal() {
    const modal = document.getElementById('connectModal');
    const dontShowAgain = document.getElementById('dontShowAgain');
    
    // Eğer "bir daha gösterme" işaretliyse localStorage'a kaydet
    if (dontShowAgain && dontShowAgain.checked) {
        localStorage.setItem('connectModalHidden', 'true');
    }
    
    modal.classList.remove('show');
    document.body.style.overflow = '';
}

// Close modal when clicking outside
document.getElementById('connectModal').addEventListener('click', function(e) {
    if (e.target === this) {
        closeKozyConnectModal();
    }
});

// Close modal with ESC key
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        closeKozyConnectModal();
    }
});

// Auto-show modal on page load
document.addEventListener('DOMContentLoaded', function() {
    // Kontrol et: Daha önce "bir daha gösterme" seçilmiş mi?
    const isHidden = localStorage.getItem('connectModalHidden');
    
    if (!isHidden) {
        // Show modal immediately when page loads
        showKozyConnectModal();
    }
});
</script>